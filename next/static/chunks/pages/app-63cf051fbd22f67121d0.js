_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[8],{"6gYk":function(e,t,n){e.exports={slider:"Slider_slider__1i4gL",checked:"Slider_checked__uy0PD",bar:"Slider_bar__3Kelh",dot:"Slider_dot__2RvWl"}},"9I8p":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return i}));var r,s=n("kB5k"),a=n.n(s),c=(r=["","k","M","G","T","P","E"],function(e,t,n){if(0===e)return e;if(e<1)return new a.a(e).dp(n,1).toString();var s=Math.floor(Math.log10(Math.abs(e))/3),c=void 0===r[s]?"e".concat(3*s):r[s],i=Math.pow(10,3*s),l=e/i;return l.toLocaleString(void 0,{minimumFractionDigits:t,maximumFractionDigits:n})+c}),i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new a.a(new a.a(e).toFixed(t,1));return n?r:r.toNumber()}},GGAD:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app",function(){return n("axfi")}])},M5nE:function(e,t,n){e.exports={balance:"Balance_balance__2dJep",info:"Balance_info__g-8TT",supply:"Balance_supply__2k10l",borrow:"Balance_borrow__wEnUv",label:"Balance_label__3Z3AI",value:"Balance_value__3uzSI",apy:"Balance_apy__3QtMd",limit:"Balance_limit__3CRJK",status:"Balance_status__3EU-u",bar:"Balance_bar__ZDEmV"}},Qetd:function(e,t,n){"use strict";var r=Object.assign.bind(Object);e.exports=r,e.exports.default=e.exports},axfi:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return G}));var r=n("nKUr"),s=n("rePB"),a=n("T5bk"),c=n("ODXe"),i=n("q1tI"),l=n("kB5k"),o=n.n(l),d=n("9I8p"),u=n("M5nE"),b=n.n(u);function j(e){var t=e.totalSupply,n=e.totalCash,s=e.totalBorrow,a=e.netAPY,c=n>0?s/n*100:0;return Object(r.jsxs)("div",{className:b.a.balance,children:[Object(r.jsxs)("div",{className:"".concat(b.a.info," flex-center justify-around"),children:[Object(r.jsxs)("div",{className:b.a.supply,children:[Object(r.jsx)("span",{className:b.a.label,children:"Supply Balance"}),Object(r.jsxs)("span",{className:b.a.value,children:["$",Object(d.a)(t,7,7)]})]}),Object(r.jsx)("div",{className:"".concat(b.a.apy," flex-center justify-center center"),children:Object(r.jsxs)("div",{className:b.a.net,children:[Object(r.jsx)("div",{className:b.a.label,children:"NET APY"}),Object(r.jsx)("div",{className:b.a.value,children:0!==a?"".concat(a.toFixed(2)," %"):"..."})]})}),Object(r.jsxs)("div",{className:b.a.borrow,children:[Object(r.jsx)("span",{className:b.a.label,children:"Borrow Balance"}),Object(r.jsxs)("span",{className:b.a.value,children:["$",Object(d.a)(s,7,7)]})]})]}),Object(r.jsxs)("div",{className:"".concat(b.a.limit," flex-center"),children:[Object(r.jsxs)("span",{children:["Borrow Limit ",Object(r.jsxs)("b",{children:[c.toFixed(2),"%"]})]}),Object(r.jsx)("div",{className:b.a.status,children:Object(r.jsx)("span",{className:b.a.bar,style:{width:"".concat(Math.min(c,100),"%")}})}),Object(r.jsxs)("span",{children:["$",Object(d.a)(n,2,2)]})]})]})}var p=n("aVy/"),y=n("6gYk"),m=n.n(y);function O(e){var t=e.value,n=e.onChange,s=Object(i.useState)(!1),a=s[0],c=s[1];return Object(i.useEffect)((function(){c(t)}),[t]),Object(r.jsx)("div",{className:"".concat(m.a.slider," ").concat(a?m.a.checked:""),onClick:function(e){e.stopPropagation(),n&&n()},children:Object(r.jsxs)("span",{className:m.a.bar,children:[Object(r.jsx)("i",{className:m.a.dot}),Object(r.jsx)("i",{className:m.a.dot}),Object(r.jsx)("i",{className:m.a.dot})]})})}var h=n("wslm"),f=n.n(h);function x(e){var t=e.isMyMarkets,n=e.market,s=e.balance,a=e.assetsIn,c=e.supplyRatePerBlock,i=e.onSupply,l=e.onEnterMarket,u=a.some((function(e){return e.toLowerCase()===n.id}));return Object(r.jsxs)("tr",{className:"".concat(f.a.market," ").concat(f.a.supply),onClick:function(){return i()},children:[Object(r.jsxs)("td",{className:"flex-center",children:[Object(r.jsx)("div",{className:f.a.logo,children:Object(r.jsx)("img",{src:"/assets/cryptologos/".concat(n.underlyingSymbol.split(" ")[0].toLowerCase(),".").concat(["BLO","DPI","AKITA","ELON","KISHU","SHIB","TNT"].includes(n.underlyingSymbol)?"png":"svg")})})," ",n.underlyingSymbol]}),Object(r.jsxs)("td",{children:[Object(r.jsxs)("p",{children:[new o.a(5760*c+1).pow(365).minus(1).times(100).dp(2,1).toString(10),"%"]}),t&&Object(r.jsx)("p",{className:f.a.textOpacity,children:n.underlyingSymbol})]}),Object(r.jsxs)("td",{children:[t&&Object(r.jsxs)("p",{children:["$",Object(d.a)(Number(s)*n.underlyingPriceUSD,0,2,n.underlyingDecimals)]}),Object(r.jsxs)("p",{className:t?f.a.textOpacity:"",children:[Number(s).toFixed(2)," ",n.underlyingSymbol]})]}),Object(r.jsx)("td",{children:!new o.a(n.collateralFactor).isZero()&&Object(r.jsx)(O,{value:u,onChange:function(){return l(u)}})})]})}function g(e){var t=e.isMyMarkets,n=e.market,s=e.balance,a=e.totalCash,c=e.borrowRatePerBlock,i=e.onBorrow;return Object(r.jsxs)("tr",{className:"".concat(f.a.market," ").concat(f.a.supply),onClick:function(){return i()},children:[Object(r.jsxs)("td",{className:"flex-center",children:[Object(r.jsx)("div",{className:f.a.logo,children:Object(r.jsx)("img",{src:"/assets/cryptologos/".concat(n.underlyingSymbol.split(" ")[0].toLowerCase(),".").concat(["BLO","DPI","AKITA","ELON","KISHU","SHIB","TNT"].includes(n.underlyingSymbol)?"png":"svg")})})," ",n.underlyingSymbol]}),Object(r.jsxs)("td",{children:[Object(r.jsxs)("p",{children:[new o.a(5760*c+1).pow(365).minus(1).times(100).dp(2,1).toString(10),"%"]}),t&&Object(r.jsx)("p",{className:f.a.textOpacity,children:"TBD"})]}),Object(r.jsxs)("td",{children:[t&&Object(r.jsxs)("p",{children:["$",Object(d.a)(Number(s)*n.underlyingPriceUSD,0,2,n.underlyingDecimals)]}),Object(r.jsxs)("p",{className:t?f.a.textOpacity:"",children:[Number(s).toFixed(2)," ",n.underlyingSymbol]})]}),Object(r.jsxs)("td",{children:[t&&Object(r.jsxs)("div",{className:"flex-center justify-end",children:[Object(r.jsx)("div",{className:f.a.progress,children:Object(r.jsx)("div",{style:{width:Number(s)*n.underlyingPriceUSD/a*30},className:f.a.percent})}),(a>0?Number(s)*n.underlyingPriceUSD*100/a:0).toFixed(2),"%"]}),!t&&Object(r.jsxs)("p",{children:["$",Object(d.a)(Number(n.cash)*n.underlyingPriceUSD,0,2,n.underlyingDecimals)]})]})]})}var w=n("89Ff"),v=n("QmDt"),S=n("JYT4"),A=n("vyta"),k=n.n(A);function N(e){var t=e.network,n=e.pending,s=e.market,a=e.disabled,c=e.onSubmit,i=e.onClose,l=e.closeOnEscape,o=s&&s.assetIn;return Object(r.jsx)(S.a,{show:!!s,title:"".concat(o?"Disable":"Enable"," as collateral"),onRequestClose:i,closeOnEscape:l,loading:n,children:n?Object(r.jsx)(v.a,{hash:n?a:"",network:t}):Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c()},className:k.a.form,children:[Object(r.jsx)("p",{children:"Each asset used as collateral increases your borrowing limit. Be careful, this can subject the asset to being seized in liquidation."}),Object(r.jsx)("div",{className:"flex justify-end",children:Object(r.jsx)(w.a,{disabled:a,children:o?"Exit Market":"Enter Market"})})]})})}var B=n("lC+0"),_=n.n(B);function P(e){var t=e.infoType,n=void 0===t?"supply":t,s=e.assetUrl,a=e.isBorrowLimitInfo,c=void 0===a||a,i=e.apy,l=void 0===i?"0":i,o=e.borrowBalance,u=void 0===o?0:o,b=e.borrowLimit,j=void 0===b?0:b,p=e.borrowLimitUsed,y=void 0===p?0:p,m=e.distributeApy;return Object(r.jsxs)("div",{className:_.a.assetInfo,children:[Object(r.jsxs)("div",{className:_.a.apySection,children:[Object(r.jsxs)("span",{className:_.a.label,children:["supply"===n?"Supply":"Borrow"," Rates"]}),Object(r.jsxs)("div",{className:"".concat(_.a.info," flex justify-between"),children:[Object(r.jsxs)("div",{className:"flex-center",children:[Object(r.jsx)("img",{src:s,alt:"asset"}),Object(r.jsxs)("span",{children:["supply"===n?"Supply":"Borrow"," APY"]})]}),Object(r.jsxs)("span",{children:[Number(l||0).toFixed(2),"%"]})]}),Object(r.jsxs)("div",{className:"".concat(_.a.info," flex justify-between"),children:[Object(r.jsxs)("div",{className:"flex-center",children:[Object(r.jsx)("img",{src:"/assets/token.png",alt:"asset"}),Object(r.jsx)("span",{children:"Distribution APY"})]}),Object(r.jsxs)("span",{children:[m?Number(m).toFixed(2):"-","%"]})]})]}),c&&Object(r.jsxs)("div",{className:_.a.borrowSection,children:[Object(r.jsx)("span",{className:_.a.label,children:"Borrow Limit"}),Object(r.jsxs)("div",{className:"".concat(_.a.info," flex justify-between"),children:[Object(r.jsx)("span",{children:"supply"===n?"Borrow Limit":"Borrow Balance"}),Object(r.jsxs)("span",{children:["$","supply"===n?(j||0).toFixed(2):Object(d.a)(u,7,7)]})]}),Object(r.jsxs)("div",{className:"".concat(_.a.info," flex justify-between"),children:[Object(r.jsx)("span",{children:"Borrow Limit Used"}),Object(r.jsxs)("span",{children:[(y||0).toFixed(2),"%"]})]})]})]})}var D=n("Evpv");function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C={supplyAmount:0,withdrawAmount:0};function L(e){var t=e.network,n=e.pending,a=e.market,c=e.balance,l=e.current,u=e.gas,b=e.borrowLimit,j=e.borrowLimitUsed,p=e.supplyRatePerBlock,y=e.totalBorrow,m=e.totalSupply,O=e.assetsIn,h=e.allowed,f=e.distributeApy,x=e.disabled,g=e.onSubmit,A=e.onClose,N=e.closeOnEscape,B=Object(i.useState)("supply"),_=B[0],M=B[1],L=Object(i.useState)(C),E=L[0],T=L[1],U=E.supplyAmount,R=E.withdrawAmount,F=a&&(a.underlyingAddress===D.a?c-2*u:c),H=a&&O&&O.some((function(e){return e.toLowerCase()===a.id})),K=a&&Object(d.b)(H&&!new o.a(a.collateralFactor).isZero()?Math.min(Math.min(new o.a(m).minus(new o.a(y).div(a.collateralFactor)).div(a.underlyingPriceUSD).toNumber(),a.supplyBalance),a.cash):Math.min(a.supplyBalance,a.cash),a.underlyingDecimals),Y=function(e){var t=(e.target.value||"").replace(/[^.\d]/g,"");t.endsWith(".")?t=t.replace(/\./g,"")+".":t&&(t=0!==Number(t)?Object(d.b)(t,a.underlyingDecimals,!0):t),T(I(I({},E),{},Object(s.a)({},e.target.name,t.toString())))};return Object(i.useEffect)((function(){("supply"!==_||U>0)&&(M("supply"),T(C))}),[a]),Object(r.jsx)(S.a,{show:!!a,title:h?"".concat("supply"===_?"Supply":"Withdraw"," Token"):"Approve Token",onRequestClose:A,closeOnEscape:N,loading:n,children:n?Object(r.jsx)(v.a,{hash:n?x:"",network:t}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:k.a.tabs,children:[Object(r.jsx)(w.a,{className:"supply"===_?k.a.active:"",onClick:function(){return"supply"!==_&&M("supply")},children:"Supply"}),Object(r.jsx)(w.a,{className:"withdraw"===_?k.a.active:"",onClick:function(){return"withdraw"!==_&&M("withdraw")},children:"Withdraw"})]}),a&&Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),g("supply"===_?{amount:U,type:_}:{amount:R,type:_})},className:k.a.form,children:["supply"===_&&Object(r.jsxs)(r.Fragment,{children:[h?Object(r.jsxs)("div",{className:k.a.field,children:[Object(r.jsxs)("label",{htmlFor:"supplyAmount",children:["Amount (",a.underlyingSymbol,")"," ",Object(r.jsxs)("span",{onClick:function(){return T(I(I({},E),{},{supplyAmount:F}))},children:["[max - ",Object(d.b)(c,4),"]"]})]}),Object(r.jsx)("input",{id:"supplyAmount",name:"supplyAmount",type:"text",value:U,onChange:Y})]}):Object(r.jsxs)("p",{children:["To Supply or Repay ",a.underlyingSymbol," to the Based Loans, you need to enable it first."]}),Object(r.jsx)(P,{infoType:"supply",assetUrl:"/assets/cryptologos/".concat(a.underlyingSymbol.split(" ")[0].toLowerCase(),".").concat(["BLO","DPI","AKITA","ELON","KISHU","SHIB","TNT"].includes(a.underlyingSymbol)?"png":"svg"),isBorrowLimitInfo:h,borrowLimit:b,borrowLimitUsed:j,distributeApy:f,apy:new o.a(5760*p+1).pow(365).minus(1).times(100).dp(2,1).toString(10)}),Object(r.jsx)("div",{className:"flex justify-end",children:Object(r.jsx)(w.a,{disabled:x||h&&(U<=0||U>F),children:h?"Supply":"Enable"})}),Object(r.jsxs)("div",{className:"".concat(k.a.balance," flex justify-between"),children:[Object(r.jsx)("span",{children:"Wallet Balance"}),Object(r.jsxs)("span",{children:[c," ",a.underlyingSymbol]})]})]}),"withdraw"===_&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:k.a.field,children:[Object(r.jsxs)("label",{htmlFor:"withdrawAmount",children:["Amount (",a.underlyingSymbol,")"," ",Object(r.jsxs)("span",{onClick:function(){return T(I(I({},E),{},{withdrawAmount:K}))},children:["[max - ",Object(d.b)(K,4),"]"]})]}),Object(r.jsx)("input",{id:"withdrawAmount",name:"withdrawAmount",type:"text",value:R,onChange:Y})]}),Object(r.jsx)(P,{infoType:"supply",assetUrl:"/assets/cryptologos/".concat(a.underlyingSymbol.split(" ")[0].toLowerCase(),".").concat(["BLO","DPI","AKITA","ELON","KISHU","SHIB","TNT"].includes(a.underlyingSymbol)?"png":"svg"),apy:new o.a(5760*p+1).pow(365).minus(1).times(100).dp(2,1).toString(10),borrowLimit:b,borrowLimitUsed:j,distributeApy:f}),Object(r.jsx)("div",{className:"flex justify-end",children:Object(r.jsx)(w.a,{disabled:x||R<=0||R>a.supplyBalance,children:"Withdraw"})}),Object(r.jsxs)("div",{className:"".concat(k.a.balance," flex justify-between"),children:[Object(r.jsx)("span",{children:"Currently Supplying"}),Object(r.jsxs)("span",{children:[l," ",a.underlyingSymbol]})]})]})]})]})})}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U={borrowAmount:0,repayAmount:0};function R(e){var t=e.network,n=e.pending,a=e.market,c=e.balance,l=e.walletBalance,u=e.borrowLimit,b=e.borrowLimitUsed,j=e.borrowRatePerBlock,p=e.totalBorrow,y=e.allowed,m=e.distributeApy,O=e.disabled,h=e.onSubmit,f=e.onClose,x=e.closeOnEscape,g=Object(i.useState)("borrow"),A=g[0],N=g[1],B=Object(i.useState)(U),_=B[0],M=B[1],I=_.borrowAmount,C=_.repayAmount,L=u*(100-b)/100,E=a?new o.a(L).times(.8).isGreaterThan(new o.a(a.cash))?new o.a(a.cash):new o.a(L).times(.8).dp(a.underlyingDecimals,1).toString(10):0,R=function(e){var t=(e.target.value||"").replace(/[^.\d]/g,"");t.endsWith(".")?t=t.replace(/\./g,"")+".":t&&(t=0!==Number(t)?Object(d.b)(t,a.underlyingDecimals,!0):t),M(T(T({},_),{},Object(s.a)({},e.target.name,t.toString())))};return Object(i.useEffect)((function(){("borrow"!==A||I>0)&&(N("borrow"),M(U))}),[a]),Object(r.jsx)(S.a,{show:!!a,title:y?"".concat("borrow"===A?"Borrow":"Repay"," Token"):"Approve Token",onRequestClose:f,closeOnEscape:x,loading:n,children:n?Object(r.jsx)(v.a,{hash:n?O:"",network:t}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:k.a.tabs,children:[Object(r.jsx)(w.a,{className:"borrow"===A?k.a.active:"",onClick:function(){return"borrow"!==A&&N("borrow")},children:"Borrow"}),Object(r.jsx)(w.a,{className:"repay"===A?k.a.active:"",onClick:function(){return"repay"!==A&&N("repay")},children:"Repay"})]}),a&&Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),h("borrow"===A?{amount:I,type:A}:{amount:a.underlyingAddress===D.a?C:C===c?-1:C,type:A})},className:k.a.form,children:["borrow"===A&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:k.a.field,children:[Object(r.jsxs)("label",{htmlFor:"borrowAmount",children:["Amount (",a.underlyingSymbol,")"," ",Object(r.jsxs)("span",{onClick:function(){return M(T(T({},_),{},{borrowAmount:E}))},children:["[max - ",Object(d.b)(E,4),"]"]})]}),Object(r.jsx)("input",{id:"borrowAmount",name:"borrowAmount",type:"text",value:I,onChange:R})]}),Object(r.jsx)(P,{infoType:"borrow",assetUrl:"/assets/cryptologos/".concat(a.underlyingSymbol.split(" ")[0].toLowerCase(),".").concat(["BLO","DPI","AKITA","ELON","KISHU","SHIB","TNT"].includes(a.underlyingSymbol)?"png":"svg"),apy:new o.a(5760*j+1).pow(365).minus(1).times(100).dp(2,1).toString(10),borrowLimitUsed:b,borrowBalance:p,distributeApy:m}),Object(r.jsx)("div",{className:"flex justify-end",children:Object(r.jsx)(w.a,{disabled:O||+I<=0||+I>+E,children:"Borrow"})}),Object(r.jsxs)("div",{className:"".concat(k.a.balance," flex justify-between"),children:[Object(r.jsx)("span",{children:"Currently Borrowing"}),Object(r.jsxs)("span",{children:[c," ",a.underlyingSymbol]})]})]}),"repay"===A&&Object(r.jsxs)(r.Fragment,{children:[y?Object(r.jsxs)("div",{className:k.a.field,children:[Object(r.jsxs)("label",{htmlFor:"repayAmount",children:["Amount (",a.underlyingSymbol,")"," ",Object(r.jsxs)("span",{onClick:function(){return M(T(T({},_),{},{repayAmount:c}))},children:["[max - ",Object(d.b)(c,4),"]"]})]}),Object(r.jsx)("input",{id:"repayAmount",name:"repayAmount",type:"text",value:C,onChange:R})]}):Object(r.jsxs)("p",{children:["To Borrow or Repay ",a.underlyingSymbol," to the Based Loans, you need to enable it first."]}),Object(r.jsx)(P,{infoType:"borrow",assetUrl:"/assets/cryptologos/".concat(a.underlyingSymbol.split(" ")[0].toLowerCase(),".").concat(["BLO","DPI","AKITA","ELON","KISHU","SHIB","TNT"].includes(a.underlyingSymbol)?"png":"svg"),isBorrowLimitInfo:y,apy:new o.a(5760*j+1).pow(365).minus(1).times(100).dp(2,1).toString(10),borrowLimitUsed:b,borrowBalance:p,distributeApy:m}),Object(r.jsx)("div",{className:"flex justify-end",children:Object(r.jsx)(w.a,{disabled:O||y&&(C<=0||C>c&&Number(l)<C),children:y?"Repay":"Enable"})})]})]})]})})}var F=n("BPGd"),H=n("jR2H"),K=n.n(H);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=null;function G(e){var t=e.state,n=t.account,l=t.transactions,d=t.requests,u=t.assetsIn,b=t.marketBalances,y=t.marketAllowances,m=t.marketSupplyRates,O=t.marketBorrowRates,h=t.marketDistributeApys,f=t.supplyBalances,w=t.borrowBalances,v=t.totalSupply,S=t.totalCash,A=t.totalBorrow,k=t.netAPY,B=e.dispatch,_=e.library,P=e.markets,M={from:n.address},I=n.network,C=_&&_.web3.utils.toChecksumAddress,E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18;return t<18?new o.a(e).times(Math.pow(10,t)).toString(10):_.web3.utils.toWei(e)},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18;return t<18?new o.a(e).div(Math.pow(10,t)).toString(10):_.web3.utils.fromWei(e)},U=l.reduce((function(e,t){var n=Object(c.a)(e,2),r=n[0],s=n[1],i=Object(a.a)(t),l=i[0],o=i[1],d=i.slice(2),u={enters:{},exits:{},supplies:{},borrows:{}};switch(o){case"supply":u.supplies[d[0]]=l;break;case"borrow":u.borrows[d[0]]=l}return[W(W({},r),u.supplies),W(W({},s),u.borrows)]}),new Array(4).fill({})),H=Object(i.useState)(null),Y=H[0],G=H[1],Z=Object(i.useState)(null),$=Z[0],J=Z[1],Q=Object(i.useState)(null),V=Q[0],z=Q[1],X=Object(i.useState)(null),ee=X[0],te=X[1];function ne(){_&&Promise.all([_.web3.eth.getBlock("latest"),_.web3.eth.getGasPrice()]).then((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];n&&G(T(r)*n.gasLimit/n.transactions.length)}))}Object(i.useEffect)((function(){return _&&(q=setInterval((function(){ne()}),6e4),ne()),function(){return q&&clearInterval(q)}}),[_]),Object(i.useEffect)((function(){n.address&&(Object(F.a)(_,B),se())}),[n.address,n.network]),Object(i.useEffect)((function(){if(_&&V&&V.supplyBalance<0){var e=_.methods.BToken(_.BToken(V));Promise.all([e.getBalance(n.address),e.balanceOfUnderlying(n.address)]).then((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];z(W(W({},V),{},{bBalance:n,supplyBalance:Number(T(r,V.underlyingDecimals))}))}))}}),[V,_]);var re=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};B({type:"txRequest",payload:[e,!0].concat(n)}),t.on("transactionHash",(function(t){B({type:"txHash",payload:[t,!1,e].concat(n)})})).on("receipt",(function(t){B({type:"txHash",payload:[t.transactionHash,!0,e,r()]}),Object(F.a)(_,B)})).on("error",(function(t,r){B(r?{type:"txHash",payload:[r.transactionHash,!0,e]}:{type:"txRequest",payload:[e,!1].concat(n)})}))}},se=function e(){_.methods.Comptroller.getAssetsIn(n.address).then((function(e){B({type:"assetsIn",payload:e})})).catch((function(t){console.log("getAssetsIn",t),setTimeout((function(){return e()}),500)}))};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("section",{className:K.a.header,children:Object(r.jsx)("div",{className:"limited",children:Object(r.jsx)(j,W({},{totalSupply:v,totalCash:S,totalBorrow:A,netAPY:k}))})}),Object(r.jsxs)("section",{className:"".concat(K.a.content," flex flex-start justify-center"),children:[Object(r.jsx)("div",{className:"".concat(K.a.grid," fill")}),Object(r.jsxs)("div",{className:"".concat(K.a.container," limited flex"),children:[Object(r.jsxs)("div",{className:"full",children:[0!==P.filter((function(e){return+f[e.underlyingAddress]>0})).length&&Object(r.jsx)(p.a,{labels:{title:"My Supply Markets"},children:Object(r.jsxs)("table",{cellPadding:0,cellSpacing:0,children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"Asset"}),Object(r.jsx)("th",{children:"APY/Earned"}),Object(r.jsx)("th",{children:"Balance"}),Object(r.jsx)("th",{children:"Collateral"})]})}),Object(r.jsx)("tbody",{children:P.filter((function(e){return+f[e.underlyingAddress]>0})).map((function(e){return Object(r.jsx)(x,{isMyMarkets:!0,market:e,assetsIn:u,balance:f[e.underlyingAddress]||"0",supplyRatePerBlock:T(m[e.underlyingAddress]||"0",18),onSupply:function(){return z(W(W({},e),{},{supplyBalance:-1}))},onEnterMarket:function(t){return J(W(W({},e),{},{assetIn:t}))}},e.id)}))})]})}),Object(r.jsxs)(p.a,{labels:{title:"Supply Markets"},children:[Object(r.jsxs)("table",{cellPadding:0,cellSpacing:0,children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"Asset"}),Object(r.jsx)("th",{children:"APY"}),Object(r.jsx)("th",{children:"Wallet"}),Object(r.jsx)("th",{children:"Collateral"})]})}),Object(r.jsx)("tbody",{children:P.filter((function(e){return 0===+f[e.underlyingAddress]})).map((function(e){return Object(r.jsx)(x,{market:e,assetsIn:u,balance:b[e.underlyingAddress]||"0",supplyRatePerBlock:T(m[e.underlyingAddress]||"0",18),onSupply:function(){return z(W(W({},e),{},{supplyBalance:-1}))},onEnterMarket:function(t){return J(W(W({},e),{},{assetIn:t}))}},e.id)}))})]}),0===P.filter((function(e){return 0===+f[e.underlyingAddress]})).length&&Object(r.jsx)("p",{className:"".concat(K.a.noMarkets," center"),children:"No Markets"}),Object(r.jsx)(N,{network:I,pending:$&&d.supply===$.id,market:$,disabled:$&&U[0][$.id],onSubmit:function(){var e=$;if(_&&n.address){var t=u.includes(C(e.id)),r=_.methods.Comptroller,s=t?r.exitMarket(C(e.id),M):r.enterMarkets([C(e.id)],M);re("supply",e.id)(s.send(),(function(){se(),J(null)}))}},onClose:function(){return J(null)}}),Object(r.jsx)(L,{network:I,pending:V&&d.supply===V.id,market:V,assetsIn:u,balance:V&&b[V.underlyingAddress]||"0",current:V&&f[V.underlyingAddress]||"0",borrowLimit:S,supplyRatePerBlock:V&&T(m[V.underlyingAddress]||"0",18),borrowLimitUsed:S>0?A/S*100:0,totalSupply:v,totalBorrow:A,distributeApy:V&&h[V.underlyingAddress]&&h[V.underlyingAddress][0]||"-",gas:Number(Y),disabled:V&&U[0][V.id],allowed:V&&y[V.underlyingAddress]>0,onSubmit:function(e){if(y[V.underlyingAddress]<=0){var t=Math.pow(10,Math.min(V.underlyingDecimals,10)),n=_.methods.Market(_.Market(V));re("supply",V.id)(n.approve(C(V.id),E(t.toString()),M).send(),(function(){return B({type:"allowance",payload:Object(s.a)({},V.underlyingAddress,t)})}))}else{var r=e.amount,a=e.type,c=_.methods.BToken(_.BToken(V));if("supply"===a){var i=V.underlyingAddress===D.a?c.mint(W(W({},M),{},{value:E(r.toString())})):c.mint(E(r.toString(),V.underlyingDecimals),M);re("supply",V.id)(i.send(),(function(){return z(null)}))}else{var l=V.supplyBalance<=r?c.redeem(V.bBalance,M):c.redeemUnderlying(E(r.toString(),V.underlyingDecimals),M);re("supply",V.id)(l.send(),(function(){return z(null)}))}}},onClose:function(){return z(null)}})]})]}),Object(r.jsxs)("div",{className:"full",children:[0!==P.filter((function(e){return+w[e.underlyingAddress]>0})).length&&Object(r.jsx)(p.a,{classes:{title:"second"},labels:{title:"My Borrow Markets"},children:Object(r.jsxs)("table",{cellPadding:0,cellSpacing:0,children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"Asset"}),Object(r.jsx)("th",{children:"APY/Accrued"}),Object(r.jsx)("th",{children:"Balance"}),Object(r.jsx)("th",{children:"% Of Limit"})]})}),Object(r.jsx)("tbody",{children:P.filter((function(e){return+w[e.underlyingAddress]>0})).map((function(e){return Object(r.jsx)(g,{isMyMarkets:!0,market:e,totalCash:S,borrowRatePerBlock:T(O[e.underlyingAddress]||"0",18),balance:w[e.underlyingAddress]||"0",onBorrow:function(){return te(W(W({},e),{},{borrowBalance:-1}))}},e.id)}))})]})}),Object(r.jsxs)(p.a,{classes:{title:"second"},labels:{title:"Borrow Markets"},children:[Object(r.jsxs)("table",{cellPadding:0,cellSpacing:0,children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"Asset"}),Object(r.jsx)("th",{children:"APY"}),Object(r.jsx)("th",{children:"Wallet"}),Object(r.jsx)("th",{children:"Liquidity"})]})}),Object(r.jsx)("tbody",{children:P.filter((function(e){return 0===+w[e.underlyingAddress]})).map((function(e){return Object(r.jsx)(g,{market:e,borrowRatePerBlock:T(O[e.underlyingAddress]||"0",18),balance:b[e.underlyingAddress]||"0",onBorrow:function(){return te(W(W({},e),{},{borrowBalance:-1}))}},e.id)}))})]}),0===P.filter((function(e){return 0===+w[e.underlyingAddress]})).length&&Object(r.jsx)("p",{className:"".concat(K.a.noMarkets," center"),children:"No Markets"}),Object(r.jsx)(R,{network:I,pending:ee&&d.borrow===ee.id,market:ee,balance:ee&&w[ee.underlyingAddress]||"0",walletBalance:ee&&b[ee.underlyingAddress]||"0",totalBorrow:A,borrowLimit:ee&&(Number(ee.underlyingPriceUSD)>0?S/ee.underlyingPriceUSD:0),borrowRatePerBlock:ee&&T(O[ee.underlyingAddress]||"0",18),borrowLimitUsed:S>0?A/S*100:0,distributeApy:ee&&h[ee.underlyingAddress]&&h[ee.underlyingAddress][0]||"-",disabled:ee&&U[1][ee.id],allowed:ee&&y[ee.underlyingAddress]>0,onSubmit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.amount,n=e.type,r=_.methods.BToken(_.BToken(ee));if("borrow"===n){var a=r.borrow(E(t.toString(),ee.underlyingDecimals),M);re("borrow",ee.id)(a.send(),(function(){return te(null)}))}else if(y[ee.underlyingAddress]<=0){var c=Math.pow(10,Math.min(ee.underlyingDecimals-2,12)),i=_.methods.Market(_.Market(ee));re("borrow",ee.id)(i.approve(C(ee.id),E(c.toString(),ee.underlyingDecimals),M).send(),(function(){return B({type:"allowance",payload:Object(s.a)({},ee.underlyingAddress,c)})}))}else{var l=-1===t?new o.a(2).pow(256).minus(1).toString(10):E(t.toString(),ee.underlyingDecimals),d=ee.underlyingAddress===D.a?r.repayBorrow(W(W({},M),{},{value:l})):r.repayBorrow(l.toString(),M);re("borrow",ee.id)(d.send(),(function(){return te(null)}))}},onClose:function(){return te(null)}})]})]})]})]})]})}},jR2H:function(e,t,n){e.exports={header:"App_header__3F4Gz",content:"App_content__2wOik",grid:"App_grid__1VpRZ",container:"App_container__TYg8j",noMarkets:"App_noMarkets__1Rwa4"}},"lC+0":function(e,t,n){e.exports={assetInfo:"AssetInfo_assetInfo___Q_ZE",apySection:"AssetInfo_apySection__2ygc1",label:"AssetInfo_label__2aQax",info:"AssetInfo_info__PVUTA"}},wslm:function(e,t,n){e.exports={market:"Market_market__3eC8K",supply:"Market_supply__23AR0",borrow:"Market_borrow__2aWO9",logo:"Market_logo__2JZfb",textOpacity:"Market_textOpacity__2eUFC",progress:"Market_progress__wiu4i",percent:"Market_percent__3HnYS"}}},[["GGAD",0,1,3]]]);