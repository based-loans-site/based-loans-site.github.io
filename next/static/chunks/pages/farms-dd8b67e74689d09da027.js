_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[9],{"+BGH":function(e,t,a){e.exports={header:"Farms_header__3fZRi",content:"Farms_content__3mDyh",grid:"Farms_grid__3vEmv",container:"Farms_container__QDEKx",pool:"Farms_pool__3gzwP",title:"Farms_title__Yo1kK",poolinfo:"Farms_poolinfo__mlvvC",stakeBtn:"Farms_stakeBtn__7Cj7E",stake:"Farms_stake__23UuO",stakeinfo:"Farms_stakeinfo__NQiwl",btnWrapper:"Farms_btnWrapper__3XueW",emptyFarm:"Farms_emptyFarm__3HAZ1",emptyInfo:"Farms_emptyInfo__2oRLb"}},"4sOa":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/farms",function(){return a("x30T")}])},"9I8p":function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return i}));var n,s=a("kB5k"),r=a.n(s),c=(n=["","k","M","G","T","P","E"],function(e,t,a){if(0===e)return e;if(e<1)return new r.a(e).dp(a,1).toString();var s=Math.floor(Math.log10(Math.abs(e))/3),c=void 0===n[s]?"e".concat(3*s):n[s],i=Math.pow(10,3*s),o=e/i;return o.toLocaleString(void 0,{minimumFractionDigits:t,maximumFractionDigits:a})+c}),i=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=new r.a(new r.a(e).toFixed(t,1));return a?n:n.toNumber()}},Qetd:function(e,t,a){"use strict";var n=Object.assign.bind(Object);e.exports=n,e.exports.default=e.exports},x30T:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return A}));var n=a("nKUr"),s=a("rePB"),r=a("T5bk"),c=a("ODXe"),i=a("q1tI"),o=a("kB5k"),l=a.n(o),d=a("aVy/"),u=a("+BGH"),b=a.n(u),j=a("89Ff"),f=a("QmDt"),m=a("JYT4"),O=a("vyta"),p=a.n(O),h=a("9I8p");function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v={amount:0};function y(e){var t=e.network,a=e.type,r=void 0===a?"stake":a,c=e.isOpen,o=e.pending,l=e.disabled,u=e.farm,b=e.allowed,O=e.onSubmit,k=e.onClose,y=e.closeOnEscape,w=Object(i.useState)(null),g=w[0],_=w[1],N=Object(i.useState)(0),S=N[0],C=N[1],F=Object(i.useState)(0),A=F[0],B=F[1],E=Object(i.useState)(v),P=E[0],D=E[1],T=P.amount,M="stake"===r?u.balance||0:u.stakedBalance||0,L=function(e){var t=(e.target.value||"").replace(/[^.\d]/g,"");t.endsWith(".")?t=t.replace(/\./g,"")+".":t&&(t=0!==Number(t)?Object(h.b)(t,18,!0):t),D(x(x({},P),{},Object(s.a)({},e.target.name,t.toString())))},H=function(e){e.preventDefault(),O({type:r,amount:T})};return Object(i.useEffect)((function(){T>0&&D(v),c?(g.play(),C(15)):C(0),B(0)}),[c]),Object(i.useEffect)((function(){_(new Audio("/assets/error.mp3"))}),[]),Object(n.jsx)(m.a,{show:!!c,title:"stake"===r?"".concat(b?"Stake":"Approve"," your tokens"):"Unstake your tokens",onRequestClose:S<=A&&k,closeOnEscape:y,loading:o,extra:S>0&&new Array(S).fill(1).map((function(e,t){return Object(n.jsx)(d.a,{labels:{title:"stake"===r?"".concat(b?"Stake":"Approve"," your tokens"):"Unstake your tokens"},classes:{window:"".concat(p.a.window," ").concat(p.a.bug," ").concat(A>t?"":"hide")},onClose:S<=A&&k,onLoad:function(){setTimeout((function(){B(t+1)}),75*(t+1))},children:Object(n.jsxs)("form",{onSubmit:H,className:p.a.form,children:[b||"unstake"===r?Object(n.jsxs)("div",{className:p.a.field,children:[Object(n.jsxs)("label",{htmlFor:"amount",children:["Amount (",u.asset,")"," ",Object(n.jsxs)("span",{onClick:function(){return D(x(x({},P),{},{amount:M}))},children:["[max -"," ","stake"===r?Object(h.b)(u.balance||0,4):Object(h.b)(u.stakedBalance||0,4),"]"]})]}),Object(n.jsx)("input",{id:"amount",name:"amount",type:"text",value:T,onChange:L})]}):Object(n.jsxs)("p",{children:["To Stake ",u.asset," to the Based Loans, you need to enable it first."]}),Object(n.jsx)("div",{className:"flex justify-end",children:Object(n.jsx)(j.a,{disabled:b&&(Number(T)<=0||Number(T)>Number(M)),children:"stake"===r?"".concat(b?"Stake":"Enable"):"Unstake"})}),Object(n.jsxs)("div",{className:"".concat(p.a.balance," flex justify-between"),children:[Object(n.jsx)("span",{children:"Wallet Balance"}),Object(n.jsxs)("span",{children:["stake"===r?u.balance||0:u.stakedBalance||0," ",u.asset]})]})]})},t)})),className:o?p.a.pending:p.a.hide,children:o?Object(n.jsx)(f.a,{hash:o?l:"",network:t}):c&&Object(n.jsxs)("form",{onSubmit:H,className:p.a.form,children:[b||"unstake"===r?Object(n.jsxs)("div",{className:p.a.field,children:[Object(n.jsxs)("label",{htmlFor:"amount",children:["Amount (",u.asset,")"," ",Object(n.jsxs)("span",{onClick:function(){return D(x(x({},P),{},{amount:M}))},children:["[max -"," ","stake"===r?Object(h.b)(u.balance||0,4):Object(h.b)(u.stakedBalance||0,4),"]"]})]}),Object(n.jsx)("input",{id:"amount",name:"amount",type:"text",value:T,onChange:L})]}):Object(n.jsxs)("p",{children:["To Stake ",u.asset," to the Based Loans, you need to enable it first."]}),Object(n.jsx)("div",{className:"flex justify-end",children:Object(n.jsx)(j.a,{disabled:b&&(T<=0||T>M),children:"stake"===r?"".concat(b?"Stake":"Enable"):"Unstake"})}),Object(n.jsxs)("div",{className:"".concat(p.a.balance," flex justify-between"),children:[Object(n.jsx)("span",{children:"Wallet Balance"}),Object(n.jsxs)("span",{children:["stake"===r?u.balance||0:u.stakedBalance||0," ",u.asset]})]})]})})}function w(e){var t=e.errMessage,a=e.onClose,s=e.closeOnEscape;return Object(n.jsx)(m.a,{show:!!t,title:"Error",onRequestClose:a,closeOnEscape:s,children:Object(n.jsx)("form",{className:p.a.form,children:Object(n.jsx)("p",{className:p.a.errMsg,children:t})})})}var g=a("BPGd"),_=a("Evpv");function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18,a=Math.floor(.7*t),n=t-a;return"".concat(e.substr(0,a),"...").concat(e.substr(-n))}var S=a("fjcK");function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=e.state,a=t.account,o=t.transactions,u=t.requests,f=t.farmAllowances,m=t.farmBalances,O=t.stakedBalances,p=t.rewardBalances,h=e.dispatch,k=e.library,x={from:a.address},v=k&&k.web3.utils.toChecksumAddress,C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18;return t<18?new l.a(e).times(Math.pow(10,t)):k.web3.utils.toWei(e)},A=Object(i.useState)(null),B=A[0],E=A[1],P=Object(i.useState)("stake"),D=P[0],T=P[1],M=Object(i.useState)({asset:"",contractAddress:"",underlyingAddress:"",underlyingDecimals:8}),L=M[0],H=M[1],U=Object(i.useState)(!1),I=U[0],W=U[1],R=Object(i.useState)([]),q=R[0],G=R[1],K=Object(i.useState)(""),Q=K[0],X=K[1],J=o.reduce((function(e,t){var a=Object(c.a)(e,1)[0],n=Object(r.a)(t),s=n[0],i=n[1],o=n.slice(2),l={stakes:{}};switch(i){case"stake":l.stakes[o[0]]=s}return[F(F({},a),l.stakes)]}),new Array(4).fill({}));Object(i.useEffect)((function(){m&&O&&p&&G(_.b[a.network].Farms.map((function(e){return F(F({},e),{},{balance:m[e.underlyingAddress.toLowerCase()],stakedBalance:O[e.underlyingAddress.toLowerCase()],rewardBalance:p[e.underlyingAddress.toLowerCase()]})})))}),[m,O,p]);var Y=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};h({type:"txRequest",payload:[e,!0].concat(a)}),t.on("transactionHash",(function(t){h({type:"txHash",payload:[t,!1,e].concat(a)})})).on("receipt",(function(t){h({type:"txHash",payload:[t.transactionHash,!0,e,n()]}),Object(g.a)(k,h)})).on("error",(function(t,n){t&&t.message&&X(t.message),h(n?{type:"txHash",payload:[n.transactionHash,!0,e]}:{type:"txRequest",payload:[e,!1].concat(a)})}))}},Z=function(e,t){H(e);var a=k.methods.Farm(k.Farm(e).farmContract);switch(t){case"stake":T("stake"),W(!0);break;case"claim":var n=a.claim(x);Y("stake",L.asset)(n.send(),(function(){return W(!1)}));break;case"unstake":T("unstake"),W(!0);break;case"claim_unstake":var s=a.exit(x);Y("stake",L.asset)(s.send(),(function(){return W(!1)}))}},z=B&&q[B.pId];return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("section",{className:b.a.header}),Object(n.jsxs)("section",{className:"".concat(b.a.content," flex flex-start justify-center"),children:[Object(n.jsx)("div",{className:"".concat(b.a.grid," fill")}),0===q.length&&Object(n.jsx)("div",{className:"".concat(b.a.container," limited flex-center flex-column justify-center"),children:Object(n.jsx)("div",{className:b.a.emptyFarm,children:Object(n.jsx)(d.a,{labels:{title:"No token distributions"},children:Object(n.jsx)("div",{className:"".concat(b.a.emptyInfo," center"),children:"no token distributions available at the moment, please call customer service if you think this is an error"})})})}),!z&&0!==q.length&&Object(n.jsx)("div",{className:"".concat(b.a.container," limited flex-center flex-column justify-center"),children:Object(n.jsx)("div",{className:b.a.pool,children:q.map((function(e,t){var s=e.title,r=e.asset,c=e.contractAddress,i=e.website,o=e.websiteUrl,u=e.market,f=e.marketUrl,m=e.totalDistribution,O=e.rewardAsset;return Object(n.jsxs)(d.a,{classes:{window:"full"},labels:{title:s},children:[Object(n.jsx)("div",{className:b.a.title,children:r}),Object(n.jsxs)("div",{className:b.a.poolinfo,children:[Object(n.jsxs)("div",{children:["Contract Address:"," ",Object(n.jsx)("a",{href:Object(S.a)(c,a.network,"address"),target:"_blank",children:N(c)})]}),Object(n.jsxs)("div",{children:["Website Address:"," ",Object(n.jsx)("a",{href:o,target:"_blank",children:i})]}),Object(n.jsxs)("div",{children:["Market buy:"," ",Object(n.jsx)("a",{href:f,target:"_blank",children:u})]}),Object(n.jsxs)("div",{children:["Total Distribution:"," ",new l.a(m).toFormat(2)]})]}),Object(n.jsxs)("div",{className:"".concat(b.a.stakeBtn," flex-center flex-column justify-center"),children:[Object(n.jsx)("div",{children:"STAKE THIS ASSET?"}),Object(n.jsxs)(j.a,{className:"full",onClick:function(){return E({pId:t})},children:["Get ",O]})]})]},c)}))})}),z&&Object(n.jsx)("div",{className:"".concat(b.a.container," limited flex-center flex-column justify-center"),children:Object(n.jsx)("div",{className:b.a.stake,children:Object(n.jsxs)(d.a,{labels:{title:"Farm BLO/".concat(z.asset)},onClose:function(){return E(null)},children:[Object(n.jsxs)("div",{className:b.a.stakeinfo,children:[Object(n.jsxs)("div",{children:["Your Balance: ",z.balance," ",z.asset]}),Object(n.jsxs)("div",{children:["Currently Staked: ",z.stakedBalance]}),Object(n.jsxs)("div",{children:["Rewards Available:"," ",new l.a(z.rewardBalance).dp(4,1).toString(10)," ","BLO"]})]}),Object(n.jsxs)("div",{className:"".concat(b.a.btnWrapper," flex-center justify-center"),children:[Object(n.jsx)(j.a,{onClick:function(){return Z(z,"stake")},children:"Stake Tokens"}),Object(n.jsx)(j.a,{onClick:function(){return Z(z,"claim")},children:"Claim Rewards"}),Object(n.jsx)(j.a,{onClick:function(){return Z(z,"unstake")},children:"Unstake Tokens"}),Object(n.jsx)(j.a,{onClick:function(){return Z(z,"claim_unstake")},children:"Claim & Unstake"})]})]})},z.asset)})]}),Object(n.jsx)(y,{network:a.network,type:D,isOpen:I,allowed:L.underlyingAddress&&f[L.underlyingAddress.toLowerCase()]>0,pending:L&&u.stake===L.asset,disabled:L&&J[0][L.asset],farm:L,onSubmit:function(e){var t=q.find((function(e){return-1!==e.asset.indexOf(L.asset)}));if(f[L.underlyingAddress]<=0){var a=k.methods.Market(k.Farm(L).tokenContract),n=Math.pow(10,Math.min(t.underlyingDecimals,8));Y("stake",L.asset)(a.approve(v(L.contractAddress),C(n.toString()),x).send(),(function(){return h({type:"farmAllowances",payload:Object(s.a)({},t.underlyingAddress,n)})}))}else{var r=e.amount,c=e.type,i=k.methods.Farm(k.Farm(L).farmContract);if("stake"===c){var o=i.stake(C(r.toString(),t.underlyingDecimals),x);Y("stake",L.asset)(o.send(),(function(){return W(!1)}))}else{var l=i.withdraw(C(r.toString(),t.underlyingDecimals),x);Y("stake",L.asset)(l.send(),(function(){return W(!1)}))}}},onClose:function(){return W(!1)}}),Object(n.jsx)(w,{errMessage:Q,onClose:function(){return X("")}})]})}}},[["4sOa",0,1,3]]]);